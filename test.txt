data:text/javascript;base64,Ly8gTmFtZTogRm9udCBNYW5hZ2VyCi8vIElEOiBTUEFTZm9udE1hbmFnZXIKLy8gRGVzY3JpcHRpb246IEFkZCwgRGVsZXRlLCBhbmQgTWFuYWdlIEZvbnRzCi8vIEJ5OiBTaGFya1Bvb2wKLy8gQnk6IEFzaGltZWUgPGh0dHBzOi8vc2NyYXRjaC5taXQuZWR1L3VzZXJzLzB6bnp3Lz4KCi8vIFZlcnNpb24gVi4xLjEuMAoKKGZ1bmN0aW9uIChTY3JhdGNoKSB7CiAgInVzZSBzdHJpY3QiOwogIGlmICghU2NyYXRjaC5leHRlbnNpb25zLnVuc2FuZGJveGVkKSB0aHJvdyBuZXcgRXJyb3IoIkZvbnQgTWFuYWdlciBtdXN0IGJlIHJ1biB1bnNhbmRib3hlZCIpOwoKICBjb25zdCBleHRlbnNpb25JZCA9ICJTUEFTZm9udE1hbmFnZXIiOwogIGNvbnN0IHZtID0gU2NyYXRjaC52bTsKICBjb25zdCBydW50aW1lID0gdm0ucnVudGltZTsKCiAgY29uc3QgbWVudUljb25VUkkgPQoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCMlpYSnphVzl1UFNJeExqRWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZHBaSFJvUFNJeE1ESXVNek16TXpRaUlHaGxhV2RvZEQwaU1UQXlMak16TXpNMElpQjJhV1YzUW05NFBTSXdMREFzTVRBeUxqTXpNek0wTERFd01pNHpNek16TkNJK1BHY2dkSEpoYm5ObWIzSnRQU0owY21GdWMyeGhkR1VvTFRFNE9DNDRNelV5TXl3dE1USTRMalUyTURRMEtTSStQR2NnWkdGMFlTMXdZWEJsY2kxa1lYUmhQU0o3Sm5GMWIzUTdhWE5RWVdsdWRHbHVaMHhoZVdWeUpuRjFiM1E3T25SeWRXVjlJaUJtYVd4c0xYSjFiR1U5SW01dmJucGxjbThpSUhOMGNtOXJaVDBpYm05dVpTSWdjM1J5YjJ0bExXeHBibVZqWVhBOUltSjFkSFFpSUhOMGNtOXJaUzFzYVc1bGFtOXBiajBpYldsMFpYSWlJSE4wY205clpTMXRhWFJsY214cGJXbDBQU0l4TUNJZ2MzUnliMnRsTFdSaGMyaGhjbkpoZVQwaUlpQnpkSEp2YTJVdFpHRnphRzltWm5ObGREMGlNQ0lnYzNSNWJHVTlJbTFwZUMxaWJHVnVaQzF0YjJSbE9pQnViM0p0WVd3aVBqeHdZWFJvSUdROUlrMHhPRGd1T0RNMU1qTXNNVGM1TGpjeU56RXhZekFzTFRJNExqSTFPRFUzSURJeUxqa3dPREVzTFRVeExqRTJOalkzSURVeExqRTJOalkzTEMwMU1TNHhOalkyTjJNeU9DNHlOVGcxTnl3d0lEVXhMakUyTmpZM0xESXlMamt3T0RFZ05URXVNVFkyTmpjc05URXVNVFkyTmpkak1Dd3lPQzR5TlRnMU55QXRNakl1T1RBNE1TdzFNUzR4TmpZMk55QXROVEV1TVRZMk5qY3NOVEV1TVRZMk5qZGpMVEk0TGpJMU9EVTNMREFnTFRVeExqRTJOalkzTEMweU1pNDVNRGd4SUMwMU1TNHhOalkyTnl3dE5URXVNVFkyTmpkNklpQm1hV3hzUFNJak1XTTBaVFExSWlCemRISnZhMlV0ZDJsa2RHZzlJakFpTHo0OGNHRjBhQ0JrUFNKTk1Ua3pMamd4TVRreUxERTNPUzQzTWpjeE1tTXdMQzB5TlM0MU1UQXdNaUF5TUM0Mk56azVOU3d0TkRZdU1UZzVPVGNnTkRZdU1UZzVPVGNzTFRRMkxqRTRPVGszWXpJMUxqVXhNREF5TERBZ05EWXVNVGc1T1Rjc01qQXVOamM1T1RVZ05EWXVNVGc1T1Rjc05EWXVNVGc1T1Rkak1Dd3lOUzQxTVRBd01pQXRNakF1TmpjNU9UVXNORFl1TVRnNU9UY2dMVFEyTGpFNE9UazNMRFEyTGpFNE9UazNZeTB5TlM0MU1UQXdNaXd3SUMwME5pNHhPRGs1Tnl3dE1qQXVOamM1T1RVZ0xUUTJMakU0T1RrM0xDMDBOaTR4T0RrNU4zb2lJR1pwYkd3OUlpTXlZamRrTm1VaUlITjBjbTlyWlMxM2FXUjBhRDBpTUNJdlBqeHdZWFJvSUdROUlrMHlOVGN1TkRJMk1UVXNNVGczTGpZMk56VXhZekFzTWk0Mk9UQTBPU0F0TWk0eE9EZzRNeXcwTGpnM09UTXlJQzAwTGpnM09UTXlMRFF1T0RjNU16SmpMVEl1Tmprd05Ea3NNQ0F0TkM0NE56a3pNaXd0TWk0eE9EZzRNeUF0TkM0NE56a3pNaXd0TkM0NE56a3pNbU13TEMweUxqWTVNRFE1SURJdU1UZzRPRE1zTFRRdU9EYzVNeklnTkM0NE56a3pNaXd0TkM0NE56a3pNbU15TGpZNU1EUTVMREFnTkM0NE56a3pNaXd5TGpFNE9EZ3pJRFF1T0RjNU16SXNOQzQ0Tnprek1ub2lJR1pwYkd3OUlpTm1abVptWm1ZaUlITjBjbTlyWlMxM2FXUjBhRDBpTVNJdlBqeHdZWFJvSUdROUlrMHlOamN1T0RneE9EVXNNVFl6TGpjME5qUmpNQ3cyTGpZek1EQXhJREFzTXpndU5UVTVNRGdnTUN3ek9DNDFOVGt3T0dNd0xESXVNekE1TnpJZ0xURXVPRGN5TlRVc05DNHhPREl5T0NBdE5DNHhPREl5T0N3MExqRTRNakk0YUMwME55NHpPVGt4TTJNdE1pNHpNRGszTWl3d0lDMDBMakU0TWpJNExDMHhMamczTWpVMUlDMDBMakU0TWpJNExDMDBMakU0TWpJNFl6QXNNQ0F3TEMwME1DNHlOVFExSURBc0xUUTJMakUzTkRrMll6QXNMVEV1TkRBNU9ERWdNUzR6TkRNNU9Td3RNaTQyTVRneU55QXlMalV6TURBeUxDMHlMall4T0RJM1l6SXVNVEV3TnpVc01DQTVMakEyTXpNeUxEQWdNVEl1TXpreE9UTXNNR014TGpFd01qSTVMREFnTWk0ek1UQTJMREF1TlRBek5EUWdNaTQ1T0RjeU1Td3hMakU0TURBMll6RXVNRGd6T0Rjc01TNHdPRE00TnlBeUxqWXhNakV4TERJdU5qRXlNU0F6TGpJeU56QTNMRE11TWpJM01EWmpNQzQxTVRRME9Td3dMalV4TkRRNUlERXVPREk1TURFc01TNHhOamt5TlNBeUxqazFNRFU0TERFdU1UWTVNalZqTlM0ek9UTTNOU3d3SURJeExqUTJOemd4TERBZ01qWXVNakF6Tnpjc01HTXlMalV5T1RreUxEQWdOUzQwTnpNeExESXVNelV6TkRjZ05TNDBOek14TERRdU5qVTNOemg2VFRJME15NDVNemMzT0N3eE9UVXVOVGMyTVRsakxUSXVNRE0zTlRVc0xUUXVOVFF6TnpVZ0xUa3VORGt4TlRNc0xUSXhMakUyTmpJeUlDMHhNUzR6TlRNek5Td3RNalV1TXpFNE1URmpMVEF1T0RFek1qVXNMVEV1T0RFek5UVWdMVEl1TkRneU9UY3NMVEV1T1RReE1EUWdMVE11TWpVeU5URXNMVEF1TWpFMk9ESmpMVEV1TnpZeE5USXNNeTQ1TkRZNE5DQXRPQzQ0TXpnMUxERTVMamd3TXpReUlDMHhNUzR4TmpVME1pd3lOUzR3TVRjd09HTXRNQzQwTmprMU5Td3hMakExTWpBM0lDMHdMakl4TVRVeUxERXVOamN3TnpjZ01DNDBOVFl5TWl3eExqWTNNRGMzWXpBdU9EUTBNaklzTUNBeExqa3dNVGsxTERBZ01pNHpOak0yTkN3d1l6QXVORFF4TURZc01DQXhMakl5T1RrMkxDMHdMalE0TWpjNElERXVORFF5TURrc0xUQXVPVFU0TURkak1DNDJNVFk1TkN3dE1TNHpPREl5T0NBekxqWXhOamM0TEMwNExqRXdNelV6SURNdU5qRTJOemdzTFRndU1UQXpOVE5vT1M0M05qSTNPV013TERBZ015NHdPRGc0TERZdU9EZzRNamtnTXk0Mk9EUTVOeXc0TGpJeE56YzVZekF1TVRreE1ETXNNQzQwTWpZd01pQXdMamczTURRc01DNDRORE00TVNBeExqUTVNek0zTERBdU9EUXpPREZqTUM0M09UUXhNeXd3SURFdU9EQXhNRFFzTUNBeUxqSTNNamN6TERCak1DNDFNREF3TlN3d0lERXVNREEzT0Rnc0xUQXVOREU0T0RJZ01DNDJOemcyT1N3dE1TNHhOVEk1TW5wTk1qWXdMalEwTURreExERTNPQzQyTURVNU1XTXRNQzQwTmpNNU1Td3dJQzB4TGpRMk1URXNNQ0F0TWk0eE9ERTRNaXd3WXkwd0xqUTNOekF6TERBZ0xUQXVPRE15T1RRc01DNDFOak00TWlBdE1DNDRNekk1TkN3d0xqZ3hOamd5WXpBc01DNHlNVGsxTkNBd0xEQXVOakUxTURZZ01Dd3dMall4TlRBMll5MHhMalF3T1RVMkxDMHdMamt3TkRjMElDMHpMakE0TXpVMkxDMHhMalF6TVRnNElDMDBMamczT1RNeUxDMHhMalF6TVRnNFl5MDBMams1TmpZeUxEQWdMVGt1TURZeE5pdzBMakEyTlRBNElDMDVMakEyTVRZc09TNHdOakUyWXpBc05DNDVPVFkyTWlBMExqQTJORGs0TERrdU1EWXhOaUE1TGpBMk1UWXNPUzR3TmpFMll6RXVOemsxTnpZc01DQXpMalEyT1RjMkxDMHdMalV5TnpFMElEUXVPRGM1TXpJc0xURXVORE15WXpBc01DQXdMREF1TXpZNE1qWWdNQ3d3TGpVNE1ERTJZekFzTUM0eU5UWTNOaUF3TGpNMU5EWXNNQzQ0TlRFNE5DQXdMamd6TWprMExEQXVPRFV4T0RSak1DNDNOVEF3TWl3d0lERXVPREEwTWpRc01DQXlMakkzTWpjekxEQmpNQzQwTlRFM05pd3dJREV1TURjMk5qRXNMVEF1TnpFM01Ua2dNUzR3TnpZMk1Td3RNUzQ0TlRFNE5HTXdMQzB6TGpZNE5qZ2dNQ3d0TVRFdU56Z3hNRFVnTUN3dE1UUmpNQ3d0TVM0d09UZzBOQ0F0TUM0Mk9EYzNOQ3d0TWk0eU56RXpOaUF0TVM0eE5qYzFNaXd0TWk0eU56RXpObm9pSUdacGJHdzlJaU5tWm1abVptWWlJSE4wY205clpTMTNhV1IwYUQwaU1TSXZQanh3WVhSb0lHUTlJazB5TXpJdU9UYzNPVEVzTVRnekxqUTROVEl6WXkwd0xqY3dPVEV4TERBZ0xUSXVPRGN4T1RNc01DQXROQzR4TXpBMk5Dd3dZeTB3TGpVMU5UazRMREFnTFRBdU56QTNNallzTFRBdU5URXhOVFVnTFRBdU16ZzVOVE1zTFRFdU1qSXpORE5qTUM0MU5qVXpOeXd0TVM0eU5qWTNOQ0F4TGpReE16ZzFMQzB6TGpFMk56ZzBJREV1TnpZeU9EY3NMVE11T1RRNU9EVmpNQzR5T1RnNU55d3RNQzQyTmprNE5pQXhMakV6TnpreExDMHdMalUyTmpjM0lERXVORFl3TkRnc01DNHhOVEkxTm1Nd0xqTTJOVEUwTERBdU9ERTBNalVnTVM0eU1qazNMREl1TnpReU1qRWdNUzQzTnpRNU5Td3pMamsxT0RFeFl6QXVNamd3TlRFc01DNDJNalUxTkNBdE1DNHdNelF6TkN3eExqQTJNall4SUMwd0xqUTNPREV6TERFdU1EWXlOakY2SWlCbWFXeHNQU0lqWm1abVptWm1JaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqRWlMejQ4WnlCbWFXeHNQU0p1YjI1bElpQnpkSEp2YTJVdGQybGtkR2c5SWpFaUlHWnZiblF0Wm1GdGFXeDVQU0p6WVc1ekxYTmxjbWxtSWlCbWIyNTBMWGRsYVdkb2REMGlibTl5YldGc0lpQm1iMjUwTFhOcGVtVTlJakV5SWlCMFpYaDBMV0Z1WTJodmNqMGljM1JoY25RaUx6NDhaeUJtYVd4c1BTSnViMjVsSWlCemRISnZhMlV0ZDJsa2RHZzlJakVpSUdadmJuUXRabUZ0YVd4NVBTSnpZVzV6TFhObGNtbG1JaUJtYjI1MExYZGxhV2RvZEQwaWJtOXliV0ZzSWlCbWIyNTBMWE5wZW1VOUlqRXlJaUIwWlhoMExXRnVZMmh2Y2owaWMzUmhjblFpTHo0OFp5Qm1hV3hzUFNKdWIyNWxJaUJ6ZEhKdmEyVXRkMmxrZEdnOUlqRWlJR1p2Ym5RdFptRnRhV3g1UFNKellXNXpMWE5sY21sbUlpQm1iMjUwTFhkbGFXZG9kRDBpYm05eWJXRnNJaUJtYjI1MExYTnBlbVU5SWpFeUlpQjBaWGgwTFdGdVkyaHZjajBpYzNSaGNuUWlMejQ4Y0dGMGFDQmtQU0pOTWpNMkxqSTRORGd5TERFMU5pNHlOelF6WXpBc01DQXhMak0wTXprNExDMHlMall4T0RJM0lESXVOVE13TURJc0xUSXVOakU0TWpkak1pNHhNVEEzTlN3d0lEa3VNRFl6TXpJc01DQXhNaTR6T1RFNU15d3dZekV1TVRBeU1qa3NNQ0F5TGpNeE1EWXNNQzQxTURNME5DQXlMams0TnpJeExERXVNVGd3TURaak1TNHdPRE00Tnl3eExqQTRNemczSURFdU9UazRNVFFzTVM0ME56UTRNU0F3TGpneE5EWTNMREV1TkRjeU5qTmpMVE11TWprM01EY3NMVEF1TURBMk1EWWdMVEU0TGpjeU16Z3pMQzB3TGpBek5EUXlJQzB4T0M0M01qTTRNeXd0TUM0d016UTBNbm9pSUdacGJHdzlJaU5tWm1abVptWWlJSE4wY205clpTMTNhV1IwYUQwaU1TSXZQanh3WVhSb0lHUTlJaUlnWm1sc2JEMGlJMlptWm1abVppSWdjM1J5YjJ0bExYZHBaSFJvUFNJeElpOCtQSEJoZEdnZ1pEMGlJaUJtYVd4c1BTSWpabVptWm1abUlpQnpkSEp2YTJVdGQybGtkR2c5SWpFaUx6NDhjR0YwYUNCa1BTSWlJR1pwYkd3OUlpTm1abVptWm1ZaUlITjBjbTlyWlMxM2FXUjBhRDBpTVNJdlBqeHdZWFJvSUdROUlpSWdabWxzYkQwaUkyWm1abVptWmlJZ2MzUnliMnRsTFhkcFpIUm9QU0l4SWk4K1BDOW5Qand2Wno0OEwzTjJaejQ9IjsKCiAgY29uc3QgbWFuYWdlID0gcnVudGltZS5mb250TWFuYWdlcjsKICBsZXQgb2xkRm9udHMgPSBbXTsKICBjb25zdCBoYXNPd24gPSAob2JqLCBrZXkpID0+IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7CgogIC8qKgogICAqIENvbnN0cnVjdCBhbiBBc3NldC4KICAgKiBAcGFyYW0ge0Fzc2V0VHlwZX0gYXNzZXRUeXBlIC0gVGhlIHR5cGUgb2YgdGhpcyBhc3NldCAoc291bmQsIGltYWdlLCBldGMuKQogICAqIEBwYXJhbSB7c3RyaW5nfSBhc3NldElkIC0gVGhlIElEIG9mIHRoaXMgYXNzZXQuCiAgICogQHBhcmFtIHtEYXRhRm9ybWF0fSBbZGF0YUZvcm1hdF0gLSBUaGUgZm9ybWF0IG9mIHRoZSBkYXRhIChXQVYsIFBORywgZXRjLik7IHJlcXVpcmVkIGlmZiBgZGF0YWAgaXMgcHJlc2VudC4KICAgKiBAcGFyYW0ge0J1ZmZlcn0gW2RhdGFdIC0gVGhlIGluLW1lbW9yeSBkYXRhIGZvciB0aGlzIGFzc2V0OyBvcHRpb25hbC4KICAgKiBAcGFyYW0ge2Jvb2x9IFtnZW5lcmF0ZUlkXSAtIFdoZXRoZXIgdG8gY3JlYXRlIGlkIGZyb20gYW4gbWQ1IGhhc2ggb2YgZGF0YQogICAqIChUaGlzIGlzIGRvbmUgZm9yIHRoZSBwb3NzaWJpbGl0eSBvZiBleHRlbmRpbmcgdGhlIGNsYXNzKS4KICAgKi8KICBjbGFzcyBBc3NldCBleHRlbmRzICh2bS5hc3NldHNbMF0gPyB2bS5hc3NldHNbMF0uY29uc3RydWN0b3IgOiBPYmplY3QpIHsKICAgIGNvbnN0cnVjdG9yKGFzc2V0VHlwZSwgYXNzZXRJZCwgZGF0YUZvcm1hdCwgZGF0YSwgZ2VuZXJhdGVJZCkgewogICAgICBzdXBlcihhc3NldFR5cGUsIGFzc2V0SWQsIGRhdGFGb3JtYXQsIGRhdGEsIGdlbmVyYXRlSWQpOwogICAgfQogIH0KCiAgLy8gd2FpdCB1bnRpbCB2bS5hc3NldHNbMF0gZXhpc3RzCiAgZnVuY3Rpb24gd2FpdEZvckFzc2V0cygpIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gewogICAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIGlmICh2bS5hc3NldHNbMF0pIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxJZCk7CiAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgfQogICAgICB9LCAxMDApOwogICAgfSk7CiAgfQogIHdhaXRGb3JBc3NldHMoKTsKCiAgY2xhc3MgU1BBU2ZvbnRNYW5hZ2VyIHsKICAgIGNvbnN0cnVjdG9yKCkgewogICAgICB0aGlzLmRpZmZlcmVuY2UgPSB7IGNsZWFyZWQ6IHRydWUgfTsKICAgICAgbWFuYWdlLm9uKCJjaGFuZ2UiLCAoKSA9PiB7IHRoaXMub25DaGFuZ2VkKCkgfSk7CiAgICB9CiAgICBnZXRJbmZvKCkgewogICAgICByZXR1cm4gewogICAgICAgIGlkOiBleHRlbnNpb25JZCwKICAgICAgICBuYW1lOiAiRm9udCBNYW5hZ2VyIiwKICAgICAgICBjb2xvcjE6ICIjMmI3ZDZlIiwKICAgICAgICBjb2xvcjI6ICIjMjQ2NzViIiwKICAgICAgICBjb2xvcjM6ICIjMWM0ZTQ1IiwKICAgICAgICBtZW51SWNvblVSSSwKICAgICAgICBibG9ja3M6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgb3Bjb2RlOiAiY3VzdG9tRm9udHMiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLlJFUE9SVEVSLAogICAgICAgICAgICBoaWRlRnJvbVBhbGV0dGU6IHRydWUsCiAgICAgICAgICAgIHRleHQ6ICJhZGRlZCBmb250IGRhdGEiCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJjdXN0b21Gb250QXR0cyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJhZGRlZCBmb250IFtUSElOR10iLAogICAgICAgICAgICBkaXNhYmxlTW9uaXRvcjogdHJ1ZSwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgVEhJTkc6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiSU5GTyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJmb250RXhpc3RzIiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5CT09MRUFOLAogICAgICAgICAgICB0ZXh0OiAiZm9udCBbTkFNRV0gZXhpc3RzPyIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIE5BTUU6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBkZWZhdWx0VmFsdWU6ICJDb21pYyBTYW5zIE1TIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRhdGE0Rm9udCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJbREFUQV0gb2YgZm9udCBbTkFNRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiQ29taWMgU2FucyBNUyIgfSwKICAgICAgICAgICAgICBEQVRBOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkRBVEEiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgICItLS0iLAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJhZGRTeXN0ZW1Gb250IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAiYWRkIHN5c3RlbSBmb250IG5hbWVkIFtOQU1FXSB3aXRoIGZhbGxiYWNrIFtCQUNLVVBdIiwKICAgICAgICAgICAgYXJndW1lbnRzOiB7CiAgICAgICAgICAgICAgTkFNRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIkNvbWljIFNhbnMgTVMiIH0sCiAgICAgICAgICAgICAgQkFDS1VQOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgbWVudTogIkZBTExCQUNLUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJhZGRDdXN0b21Gb250IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5DT01NQU5ELAogICAgICAgICAgICB0ZXh0OiAiYWRkIGN1c3RvbSBmb250IG5hbWVkIFtOQU1FXSB3aXRoIGZhbGxiYWNrIFtCQUNLVVBdIGZvbnQgZGF0YS51cmkgW0RBVEFdIGZpbGUgdHlwZSBbRklMRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiUHVzYWIiIH0sCiAgICAgICAgICAgICAgREFUQTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIGRlZmF1bHRWYWx1ZTogIi50dGYsIC5vdGYsIC53b2ZmLCAud29mZjIiIH0sCiAgICAgICAgICAgICAgRklMRTogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJGSUxFUyIgfSwKICAgICAgICAgICAgICBCQUNLVVA6IHsgdHlwZTogU2NyYXRjaC5Bcmd1bWVudFR5cGUuU1RSSU5HLCBtZW51OiAiRkFMTEJBQ0tTIiB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogImRlbGV0ZUZvbnQiLAogICAgICAgICAgICBibG9ja1R5cGU6IFNjcmF0Y2guQmxvY2tUeXBlLkNPTU1BTkQsCiAgICAgICAgICAgIHRleHQ6ICJkZWxldGUgZm9udCBbTkFNRV0iLAogICAgICAgICAgICBhcmd1bWVudHM6IHsKICAgICAgICAgICAgICBOQU1FOiB7IHR5cGU6IFNjcmF0Y2guQXJndW1lbnRUeXBlLlNUUklORywgZGVmYXVsdFZhbHVlOiAiQ29taWMgU2FucyBNUyIgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBvcGNvZGU6ICJkZWxldGVBbGxGb250cyIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuQ09NTUFORCwKICAgICAgICAgICAgdGV4dDogImRlbGV0ZSBhbGwgZm9udHMiCiAgICAgICAgICB9LAogICAgICAgICAgIi0tLSIsCiAgICAgICAgICB7CiAgICAgICAgICAgIG9wY29kZTogIndoZW5Gb250IiwKICAgICAgICAgICAgYmxvY2tUeXBlOiBTY3JhdGNoLkJsb2NrVHlwZS5FVkVOVCwKICAgICAgICAgICAgdGV4dDogIndoZW4gZm9udCBpcyBbQVRUXSIsCiAgICAgICAgICAgIGlzRWRnZUFjdGl2YXRlZDogZmFsc2UsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEFUVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBVFQiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgZGlzYWJsZU1vbml0b3I6IHRydWUsCiAgICAgICAgICAgIG9wY29kZTogImZvbnRzQ2hhbmdlZCIsCiAgICAgICAgICAgIGJsb2NrVHlwZTogU2NyYXRjaC5CbG9ja1R5cGUuUkVQT1JURVIsCiAgICAgICAgICAgIHRleHQ6ICJbQVRUXSBmb250cyIsCiAgICAgICAgICAgIGFyZ3VtZW50czogewogICAgICAgICAgICAgIEFUVDogeyB0eXBlOiBTY3JhdGNoLkFyZ3VtZW50VHlwZS5TVFJJTkcsIG1lbnU6ICJBVFQiIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIG1lbnVzOiB7CiAgICAgICAgICBJTkZPOiBbIm5hbWVzIiwgImZhbGxiYWNrcyIsICJkYXRhIl0sCiAgICAgICAgICBEQVRBOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogdHJ1ZSwKICAgICAgICAgICAgaXRlbXM6IFsiZmFsbGJhY2siLCAiaXMgc3lzdGVtIiwgImRhdGEudXJpIiwgImZvcm1hdCJdCiAgICAgICAgICB9LAogICAgICAgICAgQVRUOiB7CiAgICAgICAgICAgIGFjY2VwdFJlcG9ydGVyczogZmFsc2UsCiAgICAgICAgICAgIGl0ZW1zOiBbImFkZGVkIiwgInJlbW92ZWQiXQogICAgICAgICAgfSwKICAgICAgICAgIEZBTExCQUNLUzogWwogICAgICAgICAgICAiU2NyYXRjaCIsICJTYW5zIFNlcmlmIiwgIlNlcmlmIiwgIkhhbmR3cml0aW5nIiwKICAgICAgICAgICAgIk1hcmtlciIsICJDdXJseSIsICJQaXhlbCIKICAgICAgICAgIF0sCiAgICAgICAgICBGSUxFUzogewogICAgICAgICAgICBhY2NlcHRSZXBvcnRlcnM6IHRydWUsCiAgICAgICAgICAgIGl0ZW1zOiAiZm9udHNNZW51IgogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH07CiAgICB9CgogICAgZm9udHNNZW51KCkgeyByZXR1cm4gWyIudHRmIiwgIi5vdGYiLCAiLndvZmYiLCAiLndvZmYyIl0gfQoKICAgIGFzeW5jIGRhdGFVcmxUb0FyckJ1ZmYoZGF0YVVSTCkgewogICAgICBjb25zdCBkYXRhID0gYXdhaXQgU2NyYXRjaC5mZXRjaChkYXRhVVJMKTsKICAgICAgcmV0dXJuIChhd2FpdCBkYXRhLmFycmF5QnVmZmVyKCkpOwogICAgfQoKICAgIGdlbklEKGxlbikgewogICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vVHVyYm9XYXJwL3NjcmF0Y2gtdm0vYmxvYi9kZXZlbG9wL3NyYy91dGlsL3VpZC5qcwogICAgICBjb25zdCBzb3VwID0gIiEjJSgpKissLS4vOjs9P0BbXV5fYHt8fX5BQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSI7CiAgICAgIGNvbnN0IGlkID0gW107CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHsKICAgICAgICBpZFtpXSA9IHNvdXAuY2hhckF0KE1hdGgucmFuZG9tKCkgKiBzb3VwLmxlbmd0aCk7CiAgICAgIH0KICAgICAgcmV0dXJuIGlkLmpvaW4oIiIpOwogICAgfQoKICAgIGFzeW5jIGNyZWF0ZUZvbnQoZm9udFR5cGUsIG5hbWUsIGRhdGFVUkwsIHVpZCkgewogICAgICBjb25zdCBmb250QXNzZXQgPSBuZXcgQXNzZXQoewogICAgICAgIGNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtIiwgcnVudGltZUZvcm1hdDogZm9udFR5cGUsCiAgICAgICAgbmFtZSwgaW1tdXRhYmxlOiB0cnVlCiAgICAgIH0sICh1aWQgPz8gdGhpcy5nZW5JRCgyMCkpLCBmb250VHlwZSwgbmV3IFVpbnQ4QXJyYXkoYXdhaXQgdGhpcy5kYXRhVXJsVG9BcnJCdWZmKGRhdGFVUkwpKSwgdHJ1ZSk7CiAgICAgIHJldHVybiBmb250QXNzZXQ7CiAgICB9CiAgICAKICAgIGZvbnROYW1lcyhmb250c0FycmF5KSB7IHJldHVybiBzdHJ1Y3R1cmVkQ2xvbmUoZm9udHNBcnJheS5tYXAoZm9udCA9PiBmb250LmZhbWlseSkpIH0KCiAgICAvLyBeIGludGVybmFsIGZ1bmN0aW9ucyAoVGhhbmsgeW91IDxodHRwczovL2dpdGh1Yi5jb20vQXNoaW1lZT4gPDMpCiAgICAvLyBBc2hpbWVlIGFsc28gbWFkZSB0aGUgZXZlbnQgYmxvY2sKCiAgICBjYXN0KGFyZ3MsIGZ1bmMpIHsKICAgICAgbGV0IG9iaiA9IGFyZ3M7CiAgICAgIGZvciAobGV0IGtleSBpbiBvYmopIHsKICAgICAgICBpZiAoaGFzT3duKG9iaiwga2V5KSkgb2JqW2tleV0gPSBTY3JhdGNoLkNhc3RbYHRvJHsoZnVuYyA/PyAiU3RyaW5nIil9YF0ob2JqW2tleV0pOwogICAgICB9CiAgICAgIHJldHVybiBvYmo7CiAgICB9CgogICAgY3VzdG9tRm9udHMoKSB7IHJldHVybiBKU09OLnN0cmluZ2lmeShtYW5hZ2UuZm9udHMpIH0KCiAgICBjdXN0b21Gb250QXR0cyhhcmdzKSB7CiAgICAgIGlmIChhcmdzLlRISU5HID09PSAiZGF0YSIpIHJldHVybiBKU09OLnN0cmluZ2lmeShtYW5hZ2UuZm9udHMpOwogICAgICBsZXQgb2dBcnJheSA9IG1hbmFnZS5mb250czsKICAgICAgbGV0IG5ld0FycmF5ID0gW107CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgb2dBcnJheS5sZW5ndGg7IGkrKykgewogICAgICAgIG5ld0FycmF5W2ldID0gb2dBcnJheVtpXVthcmdzLlRISU5HID09PSAibmFtZXMiID8gImZhbWlseSIgOiAiZmFsbGJhY2siXTsKICAgICAgfQogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkobmV3QXJyYXkpOwogICAgfQoKICAgIGZvbnRFeGlzdHMoYXJncykgeyByZXR1cm4gbWFuYWdlLmhhc0ZvbnQoU2NyYXRjaC5DYXN0LnRvU3RyaW5nKGFyZ3MuTkFNRSkpIH0KCiAgICBkYXRhNEZvbnQoYXJncykgewogICAgICBhcmdzID0gdGhpcy5jYXN0KGFyZ3MpOwogICAgICBjb25zdCBmb250ID0gbWFuYWdlLmZvbnRzLmZpbmQoaXRlbSA9PiBpdGVtLmZhbWlseSA9PT0gYXJncy5OQU1FKTsKICAgICAgaWYgKGZvbnQgPT09IHVuZGVmaW5lZCkgcmV0dXJuICIiOwogICAgICAvLyBQYWNrYWdpbmcgRG9lc250IHJlbW92ZSBGb250IEFzc2V0cywgbm8gbmVlZCB0byBjaGVjayAoZ29vZCEpCiAgICAgIHN3aXRjaCAoYXJncy5EQVRBKSB7CiAgICAgICAgY2FzZSAiaXMgc3lzdGVtIjogcmV0dXJuIGZvbnQuc3lzdGVtOwogICAgICAgIGNhc2UgImRhdGEudXJpIjogcmV0dXJuIGZvbnQuYXNzZXQgPyBmb250LmFzc2V0LmVuY29kZURhdGFVUkkoKSA6ICIiOwogICAgICAgIGNhc2UgImZvcm1hdCI6IHJldHVybiBmb250LmFzc2V0ID8gZm9udC5hc3NldC5kYXRhRm9ybWF0IDogIiI7CiAgICAgICAgZGVmYXVsdDogcmV0dXJuIGZvbnQuZmFsbGJhY2s7CiAgICAgIH0KICAgIH0KCiAgICBhZGRTeXN0ZW1Gb250KGFyZ3MpIHsKICAgICAgYXJncyA9IHRoaXMuY2FzdChhcmdzKTsKICAgICAgb2xkRm9udHMgPSBzdHJ1Y3R1cmVkQ2xvbmUobWFuYWdlLmZvbnRzKTsKICAgICAgaWYgKG1hbmFnZS5pc1ZhbGlkRmFtaWx5KGFyZ3MuTkFNRSkpIG1hbmFnZS5hZGRTeXN0ZW1Gb250KGFyZ3MuTkFNRSwgYXJncy5CQUNLVVApOwogICAgfQoKICAgIGFzeW5jIGFkZEN1c3RvbUZvbnQoYXJncykgewogICAgICBhcmdzID0gdGhpcy5jYXN0KGFyZ3MpOwogICAgICBpZiAoIWFyZ3MuREFUQS5zdGFydHNXaXRoKCJkYXRhOiIpKSByZXR1cm47CiAgICAgIGlmICghdGhpcy5mb250c01lbnUoKS5pbmNsdWRlcyhhcmdzLkZJTEUpKSByZXR1cm47CiAgICAgIG9sZEZvbnRzID0gc3RydWN0dXJlZENsb25lKG1hbmFnZS5mb250cyk7CiAgICAgIGNvbnN0IG15Rm9udCA9IGF3YWl0IHRoaXMuY3JlYXRlRm9udChhcmdzLkZJTEUucmVwbGFjZSgiLiIsICIiKSwgYXJncy5OQU1FLCBhcmdzLkRBVEEpOwogICAgICBtYW5hZ2UuYWRkQ3VzdG9tRm9udChhcmdzLk5BTUUsIGFyZ3MuQkFDS1VQLCBteUZvbnQpOwogICAgfQoKICAgIGRlbGV0ZUZvbnQoYXJncykgewogICAgICBjb25zdCBuYW1lcyA9IHRoaXMuY3VzdG9tRm9udEF0dHMoeyBUSElORyA6ICJuYW1lcyIgfSk7CiAgICAgIGNvbnN0IGluZGV4ID0gbmFtZXMuaW5kZXhPZihTY3JhdGNoLkNhc3QudG9TdHJpbmcoYXJncy5OQU1FKSk7CiAgICAgIG9sZEZvbnRzID0gc3RydWN0dXJlZENsb25lKG1hbmFnZS5mb250cyk7CiAgICAgIGlmIChpbmRleCA+IC0xKSBtYW5hZ2UuZGVsZXRlRm9udCh0aGlzLmN1c3RvbUZvbnRzKClbaW5kZXhdKTsKICAgIH0KCiAgICBkZWxldGVBbGxGb250cygpIHsKICAgICAgb2xkRm9udHMgPSBzdHJ1Y3R1cmVkQ2xvbmUobWFuYWdlLmZvbnRzKTsKICAgICAgbWFuYWdlLmNsZWFyKCk7CiAgICB9CgogICAgZm9udHNDaGFuZ2VkKGFyZ3MsIHV0aWwpIHsKICAgICAgYXJncyA9IHRoaXMuY2FzdChhcmdzKTsKICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IHV0aWwudGhyZWFkLmZvbnREaWZmZXJlbmNlOwogICAgICBpZiAoIWRpZmZlcmVuY2UpIHJldHVybiAiW10iOwogICAgICBpZiAoYXJncy5BVFQgPT0gImNsZWFyIikgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRpZmZlcmVuY2Uub2xkRm9udE5hbWVzKTsKICAgICAgaWYgKGRpZmZlcmVuY2UuYWRkZWQgJiYgYXJncy5BVFQudG9Mb3dlckNhc2UoKSA9PT0gInJlbW92ZWQiKSByZXR1cm47CiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShkaWZmZXJlbmNlLmRpZik7CiAgICB9CgogICAgb25DaGFuZ2VkKCkgewogICAgICBjb25zdCBvbGRGb250TmFtZXMgPSB0aGlzLmZvbnROYW1lcyhvbGRGb250cyksIGZvbnROYW1lcyA9IHRoaXMuZm9udE5hbWVzKHN0cnVjdHVyZWRDbG9uZShtYW5hZ2UuZm9udHMpKTsKICAgICAgY29uc3QgYWRkZWQgPSBvbGRGb250TmFtZXMubGVuZ3RoIDwgZm9udE5hbWVzLmxlbmd0aDsKICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IHsKICAgICAgICBvbGRGb250czogb2xkRm9udE5hbWVzLCBhZGRlZAogICAgICB9OwogICAgICBpZiAoYWRkZWQpIGRpZmZlcmVuY2UuZGlmID0gZm9udE5hbWVzLmZpbHRlcihmb250TmFtZSA9PiAhb2xkRm9udE5hbWVzLmluY2x1ZGVzKGZvbnROYW1lKSk7CiAgICAgICAgZWxzZSBkaWZmZXJlbmNlLmRpZiA9IG9sZEZvbnROYW1lcy5maWx0ZXIoZm9udE5hbWUgPT4gIWZvbnROYW1lcy5pbmNsdWRlcyhmb250TmFtZSkpOwogICAgICBjb25zdCB0aHJlYWRzID0gcnVudGltZS5zdGFydEhhdHMoYCR7ZXh0ZW5zaW9uSWR9X3doZW5Gb250YCwgewogICAgICAgIEFUVDogKGFkZGVkID8gImFkZGVkIiA6ICJyZW1vdmVkIikKICAgICAgfSk7CiAgICAgIHRocmVhZHMuZm9yRWFjaCh0aHJlYWQgPT4gdGhyZWFkLmZvbnREaWZmZXJlbmNlID0gZGlmZmVyZW5jZSk7CiAgICAgIG9sZEZvbnRzID0gbnVsbDsKICAgICAgb2xkRm9udHMgPSBbXTsKICAgIH0KICB9CgogIFNjcmF0Y2guZXh0ZW5zaW9ucy5yZWdpc3RlcihuZXcgU1BBU2ZvbnRNYW5hZ2VyKCkpOwp9KShTY3JhdGNoKTsK